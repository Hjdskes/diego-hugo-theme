{{ partial "head.html" . }}
<div class="content">
  {{ .Content }}

  {{ if isset .Site.Params "latestpostcount" }}
  <div class="posts">
    {{ $nbPosts := len (where .Data.Pages "Section" "blog") }}
    {{ if gt $nbPosts 0 }}
    <h2>Latest posts</h2>
    <ul>
      {{ range (first .Site.Params.latestpostcount (where .Pages "Section" "blog")).GroupByDate "Jan, 2006" "desc" }}
        <li class="groupby">{{ .Key }}</li>
          {{ range sort .Pages "Date" "desc" }}
            {{ partial "li.html" . }}
          {{ end }}
        {{ end }}
      </ul>

      {{ if gt $nbPosts .Site.Params.latestpostcount }}
        <a href="/blog/" class="see-more">See more ...</a>
      {{ end }}
    {{ end }}
  </div>
  {{ end }}

  {{ $nbPosts := len (where .Data.Pages "Params.best" true) }}
  {{ if gt $nbPosts 0 }}
  <div class="best-posts">
    <h2>Best posts</h2>
    <ul>
      {{ range sort .Data.Pages "Date" "desc" }}
        {{ if eq .Params.best true }}
          {{ partial "li.html" . }}
        {{ end }}
      {{ end }}
    </ul>
  </div>
  {{ end }}
</div>
{{ partial "footer.html" . }}
